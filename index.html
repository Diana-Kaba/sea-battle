<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sea battle</title>
  </head>
  <body>
    <h1>Морской бой</h1>
    <script>
      let ship = [0, 0, 0, 1, 1, 1, 0];
      let hits = 0;
      let guesses = 0;
      let isSunk = false;
      let guess;
      let shots = [];
      label: while (!isSunk) {
        guess = +prompt(
          "Ваш выстрел (введите число от 0 до 6), если хотите закончить игру, введите не число:"
        );
        if (isNaN(guess)) {
          alert("Спасибо за игру!");
          break;
        }
        if (guess < 0 || guess > 6) {
          alert("Введите правильный номер!");
          continue;
        }
        for (let i = 0; i < shots.length; i++) {
          if (guess == shots[i]) {
            alert("Вы уже стреляли в эту клеточку!");
            break label;
          }
        }
        shots[guesses] = guess;
        guesses++;
        if (1 == ship[guess]) {
          ship[guess] = -1;
          alert("Попал!");
        } else {
          alert("Промах!");
          continue;
        }
        hits++;
        isSunk = true;
        for (let i = 0; i < ship.length; i++) {
          if (ship[i] == 1) {
            isSunk = false;
          }
        }
        if (isSunk) {
          alert("Вы утопили корабль!");
          break;
        }
      }
      let stats =
        "Вы предприняли " +
        guesses +
        " попыток, чтобы утопить корабль, " +
        "что означает, что общая точность была " +
        3 / guesses;
      alert(stats);
    </script>
  </body>
</html>
